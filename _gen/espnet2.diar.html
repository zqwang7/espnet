<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>espnet2.diar package &mdash; ESPnet 202308 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="core tools" href="../apis/espnet_bin.html" />
    <link rel="prev" title="espnet2.torch_utils package" href="espnet2.torch_utils.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ESPnet
          </a>
              <div class="version">
                202308
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p><span class="caption-text">Tutorial:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Common usages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parallelization.html">Using job scheduling system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">Docker</a></li>
</ul>
<p><span class="caption-text">ESPnet1:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../espnet1_tutorial.html">Usage</a></li>
</ul>
<p><span class="caption-text">ESPnet2:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../espnet2_tutorial.html">ESPnet2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../espnet2_tutorial.html#instruction-for-run-sh">Instruction for run.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../espnet2_training_option.html">Change the configuration for training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../espnet2_format_wav_scp.html">Converting audio file formats using format_wav_scp.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../espnet2_task.html">Task class and data input system for training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../espnet2_distributed.html">Distributed training</a></li>
</ul>
<p><span class="caption-text">Notebook:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebook/DataPreparation_CMU_11492_692_Spring2023(Assignment0).html">CMU 11492/11692 Spring 2023: Data preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/DataPreparation_CMU_11492_692_Spring2023(Assignment0).html#Data-preparation-in-ESPnet">Data preparation in ESPnet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/SpeechEnhancement_CMU_11492_692_Spring2023(Assignment7).html">CMU 11492/11692 Spring 2023: Speech Enhancement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/SpeechEnhancement_CMU_11492_692_Spring2023(Assignment7).html#Contents">Contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/SpokenLanguageUnderstanding_CMU_11492_692_Spring2023(Assignment6).html">CMU 11492/11692 Spring 2023: Spoken Language Understanding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/TextToSpeech_CMU_11492_692_Spring2023(Assignment8).html">CMU 11492/11692 Spring 2023: Text to Speech</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/asr_cli.html">Speech Recognition (Recipe)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/asr_library.html">Speech Recognition (Library)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_2pass_slu_demo.html">ESPNET 2 pass SLU Demonstration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_asr_realtime_demo.html">ESPnet2-ASR realtime demonstration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_asr_transfer_learning_demo.html"><strong>Use transfer learning for ASR in ESPnet2</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_asr_transfer_learning_demo.html#Abstract">Abstract</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_asr_transfer_learning_demo.html#ESPnet-installation-(about-10-minutes-in-total)">ESPnet installation (about 10 minutes in total)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_asr_transfer_learning_demo.html#mini_an4-recipe-as-a-transfer-learning-example">mini_an4 recipe as a transfer learning example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_new_task_tutorial_CMU_11751_18781_Fall2022.html">CMU 11751/18781 Fall 2022: ESPnet Tutorial2 (New task)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_new_task_tutorial_CMU_11751_18781_Fall2022.html#Install-ESPnet-(Almost-same-procedure-as-your-first-tutorial)">Install ESPnet (Almost same procedure as your first tutorial)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_new_task_tutorial_CMU_11751_18781_Fall2022.html#What-we-provide-you-and-what-you-need-to-proceed">What we provide you and what you need to proceed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_recipe_tutorial_CMU_11751_18781_Fall2022.html">CMU 11751/18781 Fall 2022: ESPnet Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_recipe_tutorial_CMU_11751_18781_Fall2022.html#Install-ESPnet">Install ESPnet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_recipe_tutorial_CMU_11751_18781_Fall2022.html#Run-an-existing-recipe">Run an existing recipe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_recipe_tutorial_CMU_11751_18781_Fall2022.html#Make-a-new-recipe">Make a new recipe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_recipe_tutorial_CMU_11751_18781_Fall2022.html#Additional-resources">Additional resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_streaming_asr_demo.html">ESPnet2 real streaming Transformer demonstration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_tts_realtime_demo.html">ESPnet2-TTS realtime demonstration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_tutorial_2021_CMU_11751_18781.html">CMU 11751/18781 2021: ESPnet Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_tutorial_2021_CMU_11751_18781.html#Run-an-inference-example">Run an inference example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_tutorial_2021_CMU_11751_18781.html#Full-installation">Full installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_tutorial_2021_CMU_11751_18781.html#Run-a-recipe-example">Run a recipe example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet_se_demonstration_for_waspaa_2021.html">ESPnet Speech Enhancement Demonstration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet_se_demonstration_for_waspaa_2021.html#Contents">Contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet_se_demonstration_for_waspaa_2021.html#(1)-Tutorials-on-the-Basic-Usage">(1) Tutorials on the Basic Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet_se_demonstration_for_waspaa_2021.html#(2)-Tutorials-on-Contributing-to-ESPNet-SE-Project">(2) Tutorials on Contributing to ESPNet-SE Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/onnx_conversion_demo.html">espnet_onnx demonstration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/onnx_conversion_demo.html#Install-Dependency">Install Dependency</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/onnx_conversion_demo.html#Export-your-model">Export your model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/onnx_conversion_demo.html#Inference-with-onnx">Inference with onnx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/onnx_conversion_demo.html#Using-streaming-model">Using streaming model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/pretrained.html">Pretrained Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/se_demo.html">ESPnet Speech Enhancement Demonstration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/st_demo.html">ESPnet Speech Translation Demonstration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/tts_cli.html">Text-to-Speech (Recipe)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/tts_realtime_demo.html">ESPnet real time E2E-TTS demonstration</a></li>
</ul>
<p><span class="caption-text">Package Reference:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="espnet.distributed.html">espnet.distributed package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.tts.html">espnet.tts package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.asr.html">espnet.asr package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.st.html">espnet.st package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.transform.html">espnet.transform package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.bin.html">espnet.bin package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.optimizer.html">espnet.optimizer package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.nets.html">espnet.nets package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.scheduler.html">espnet.scheduler package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.vc.html">espnet.vc package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.mt.html">espnet.mt package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.lm.html">espnet.lm package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.utils.html">espnet.utils package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.svs.html">espnet2.svs package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.tts.html">espnet2.tts package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.asr.html">espnet2.asr package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.asr_transducer.html">espnet2.asr_transducer package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.st.html">espnet2.st package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.bin.html">espnet2.bin package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.asvspoof.html">espnet2.asvspoof package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.schedulers.html">espnet2.schedulers package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.gan_svs.html">espnet2.gan_svs package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.fileio.html">espnet2.fileio package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.slu.html">espnet2.slu package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.hubert.html">espnet2.hubert package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.gan_tts.html">espnet2.gan_tts package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.optimizers.html">espnet2.optimizers package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.uasr.html">espnet2.uasr package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.spk.html">espnet2.spk package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.enh.html">espnet2.enh package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.train.html">espnet2.train package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.main_funcs.html">espnet2.main_funcs package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.samplers.html">espnet2.samplers package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.mt.html">espnet2.mt package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.fst.html">espnet2.fst package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.lm.html">espnet2.lm package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.layers.html">espnet2.layers package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.utils.html">espnet2.utils package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.tasks.html">espnet2.tasks package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.iterators.html">espnet2.iterators package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.text.html">espnet2.text package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.torch_utils.html">espnet2.torch_utils package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">espnet2.diar package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-diar-label-processor-1">espnet2.diar.label_processor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-diar-espnet-model-1">espnet2.diar.espnet_model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-diar-abs-diar-1">espnet2.diar.abs_diar</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-diar-init-1">espnet2.diar.__init__</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-diar-decoder-abs-decoder-1">espnet2.diar.decoder.abs_decoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-diar-decoder-linear-decoder-1">espnet2.diar.decoder.linear_decoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-diar-decoder-init-1">espnet2.diar.decoder.__init__</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-diar-separator-tcn-separator-nomask-1">espnet2.diar.separator.tcn_separator_nomask</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-diar-separator-init-1">espnet2.diar.separator.__init__</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-diar-attractor-rnn-attractor-1">espnet2.diar.attractor.rnn_attractor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-diar-attractor-abs-attractor-1">espnet2.diar.attractor.abs_attractor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-diar-attractor-init-1">espnet2.diar.attractor.__init__</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-diar-layers-tcn-nomask-1">espnet2.diar.layers.tcn_nomask</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-diar-layers-abs-mask-1">espnet2.diar.layers.abs_mask</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-diar-layers-multi-mask-1">espnet2.diar.layers.multi_mask</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-diar-layers-init-1">espnet2.diar.layers.__init__</a></li>
</ul>
</li>
</ul>
<p><span class="caption-text">Tool Reference:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apis/espnet_bin.html">core tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apis/espnet2_bin.html">core tools (espnet2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apis/utils_py.html">python utility tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apis/utils_sh.html">bash utility tools</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ESPnet</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">espnet2.diar package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_gen/espnet2.diar.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="espnet2-diar-package">
<h1>espnet2.diar package<a class="headerlink" href="#espnet2-diar-package" title="Permalink to this headline">¶</a></h1>
<section id="espnet2-diar-label-processor-1">
<span id="espnet2-diar-label-processor"></span><h2>espnet2.diar.label_processor<a class="headerlink" href="#espnet2-diar-label-processor-1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.diar.label_processor"></span><dl class="class">
<dt id="espnet2.diar.label_processor.LabelProcessor">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.diar.label_processor.</code><code class="sig-name descname">LabelProcessor</code><span class="sig-paren">(</span><em class="sig-param">win_length: int = 512</em>, <em class="sig-param">hop_length: int = 128</em>, <em class="sig-param">center: bool = True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/label_processor.html#LabelProcessor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.label_processor.LabelProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.module.Module</span></code></p>
<p>Label aggregator for speaker diarization</p>
<dl class="method">
<dt id="espnet2.diar.label_processor.LabelProcessor.forward">
<code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">input: torch.Tensor</em>, <em class="sig-param">ilens: torch.Tensor</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/label_processor.html#LabelProcessor.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.label_processor.LabelProcessor.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Forward.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> – (Batch, Nsamples, Label_dim)</p></li>
<li><p><strong>ilens</strong> – (Batch)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(Batch, Frames, Label_dim)
olens: (Batch)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>output</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="espnet2-diar-espnet-model-1">
<span id="espnet2-diar-espnet-model"></span><h2>espnet2.diar.espnet_model<a class="headerlink" href="#espnet2-diar-espnet-model-1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.diar.espnet_model"></span><dl class="class">
<dt id="espnet2.diar.espnet_model.ESPnetDiarizationModel">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.diar.espnet_model.</code><code class="sig-name descname">ESPnetDiarizationModel</code><span class="sig-paren">(</span><em class="sig-param">frontend: Optional[espnet2.asr.frontend.abs_frontend.AbsFrontend], specaug: Optional[espnet2.asr.specaug.abs_specaug.AbsSpecAug], normalize: Optional[espnet2.layers.abs_normalize.AbsNormalize], label_aggregator: torch.nn.modules.module.Module, encoder: espnet2.asr.encoder.abs_encoder.AbsEncoder, decoder: espnet2.diar.decoder.abs_decoder.AbsDecoder, attractor: Optional[espnet2.diar.attractor.abs_attractor.AbsAttractor], diar_weight: float = 1.0, attractor_weight: float = 1.0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/espnet_model.html#ESPnetDiarizationModel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.espnet_model.ESPnetDiarizationModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="espnet2.train.html#espnet2.train.abs_espnet_model.AbsESPnetModel" title="espnet2.train.abs_espnet_model.AbsESPnetModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">espnet2.train.abs_espnet_model.AbsESPnetModel</span></code></a></p>
<p>Speaker Diarization model</p>
<p>If “attractor” is “None”, SA-EEND will be used.
Else if “attractor” is not “None”, EEND-EDA will be used.
For the details about SA-EEND and EEND-EDA, refer to the following papers:
SA-EEND: <a class="reference external" href="https://arxiv.org/pdf/1909.06247.pdf">https://arxiv.org/pdf/1909.06247.pdf</a>
EEND-EDA: <a class="reference external" href="https://arxiv.org/pdf/2005.09921.pdf">https://arxiv.org/pdf/2005.09921.pdf</a>, <a class="reference external" href="https://arxiv.org/pdf/2106.10654.pdf">https://arxiv.org/pdf/2106.10654.pdf</a></p>
<dl class="method">
<dt id="espnet2.diar.espnet_model.ESPnetDiarizationModel.attractor_loss">
<code class="sig-name descname">attractor_loss</code><span class="sig-paren">(</span><em class="sig-param">att_prob</em>, <em class="sig-param">label</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/espnet_model.html#ESPnetDiarizationModel.attractor_loss"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.espnet_model.ESPnetDiarizationModel.attractor_loss" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="espnet2.diar.espnet_model.ESPnetDiarizationModel.calc_diarization_error">
<em class="property">static </em><code class="sig-name descname">calc_diarization_error</code><span class="sig-paren">(</span><em class="sig-param">pred</em>, <em class="sig-param">label</em>, <em class="sig-param">length</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/espnet_model.html#ESPnetDiarizationModel.calc_diarization_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.espnet_model.ESPnetDiarizationModel.calc_diarization_error" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="espnet2.diar.espnet_model.ESPnetDiarizationModel.collect_feats">
<code class="sig-name descname">collect_feats</code><span class="sig-paren">(</span><em class="sig-param">speech: torch.Tensor</em>, <em class="sig-param">speech_lengths: torch.Tensor</em>, <em class="sig-param">spk_labels: torch.Tensor = None</em>, <em class="sig-param">spk_labels_lengths: torch.Tensor = None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span> &#x2192; Dict[str, torch.Tensor]<a class="reference internal" href="../_modules/espnet2/diar/espnet_model.html#ESPnetDiarizationModel.collect_feats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.espnet_model.ESPnetDiarizationModel.collect_feats" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="espnet2.diar.espnet_model.ESPnetDiarizationModel.create_length_mask">
<code class="sig-name descname">create_length_mask</code><span class="sig-paren">(</span><em class="sig-param">length</em>, <em class="sig-param">max_len</em>, <em class="sig-param">num_output</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/espnet_model.html#ESPnetDiarizationModel.create_length_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.espnet_model.ESPnetDiarizationModel.create_length_mask" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="espnet2.diar.espnet_model.ESPnetDiarizationModel.encode">
<code class="sig-name descname">encode</code><span class="sig-paren">(</span><em class="sig-param">speech: torch.Tensor</em>, <em class="sig-param">speech_lengths: torch.Tensor</em>, <em class="sig-param">bottleneck_feats: torch.Tensor</em>, <em class="sig-param">bottleneck_feats_lengths: torch.Tensor</em><span class="sig-paren">)</span> &#x2192; Tuple[torch.Tensor, torch.Tensor]<a class="reference internal" href="../_modules/espnet2/diar/espnet_model.html#ESPnetDiarizationModel.encode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.espnet_model.ESPnetDiarizationModel.encode" title="Permalink to this definition">¶</a></dt>
<dd><p>Frontend + Encoder</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>speech</strong> – (Batch, Length, …)</p></li>
<li><p><strong>speech_lengths</strong> – (Batch,)</p></li>
<li><p><strong>bottleneck_feats</strong> – (Batch, Length, …): used for enh + diar</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="espnet2.diar.espnet_model.ESPnetDiarizationModel.forward">
<code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">speech: torch.Tensor</em>, <em class="sig-param">speech_lengths: torch.Tensor = None</em>, <em class="sig-param">spk_labels: torch.Tensor = None</em>, <em class="sig-param">spk_labels_lengths: torch.Tensor = None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span> &#x2192; Tuple[torch.Tensor, Dict[str, torch.Tensor], torch.Tensor]<a class="reference internal" href="../_modules/espnet2/diar/espnet_model.html#ESPnetDiarizationModel.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.espnet_model.ESPnetDiarizationModel.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Frontend + Encoder + Decoder + Calc loss</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>speech</strong> – (Batch, samples)</p></li>
<li><p><strong>speech_lengths</strong> – (Batch,) default None for chunk interator,
because the chunk-iterator does not
have the speech_lengths returned.
see in
espnet2/iterators/chunk_iter_factory.py</p></li>
<li><p><strong>spk_labels</strong> – (Batch, )</p></li>
<li><p><strong>kwargs</strong> – “utt_id” is among the input.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="espnet2.diar.espnet_model.ESPnetDiarizationModel.pit_loss">
<code class="sig-name descname">pit_loss</code><span class="sig-paren">(</span><em class="sig-param">pred</em>, <em class="sig-param">label</em>, <em class="sig-param">lengths</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/espnet_model.html#ESPnetDiarizationModel.pit_loss"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.espnet_model.ESPnetDiarizationModel.pit_loss" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="espnet2.diar.espnet_model.ESPnetDiarizationModel.pit_loss_single_permute">
<code class="sig-name descname">pit_loss_single_permute</code><span class="sig-paren">(</span><em class="sig-param">pred</em>, <em class="sig-param">label</em>, <em class="sig-param">length</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/espnet_model.html#ESPnetDiarizationModel.pit_loss_single_permute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.espnet_model.ESPnetDiarizationModel.pit_loss_single_permute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="espnet2-diar-abs-diar-1">
<span id="espnet2-diar-abs-diar"></span><h2>espnet2.diar.abs_diar<a class="headerlink" href="#espnet2-diar-abs-diar-1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.diar.abs_diar"></span><dl class="class">
<dt id="espnet2.diar.abs_diar.AbsDiarization">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.diar.abs_diar.</code><code class="sig-name descname">AbsDiarization</code><a class="reference internal" href="../_modules/espnet2/diar/abs_diar.html#AbsDiarization"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.abs_diar.AbsDiarization" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.module.Module</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>Initializes internal Module state, shared by both nn.Module and ScriptModule.</p>
<dl class="method">
<dt id="espnet2.diar.abs_diar.AbsDiarization.forward">
<em class="property">abstract </em><code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">input: torch.Tensor</em>, <em class="sig-param">ilens: torch.Tensor</em><span class="sig-paren">)</span> &#x2192; Tuple[torch.Tensor, torch.Tensor, collections.OrderedDict]<a class="reference internal" href="../_modules/espnet2/diar/abs_diar.html#AbsDiarization.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.abs_diar.AbsDiarization.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the computation performed at every call.</p>
<p>Should be overridden by all subclasses.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although the recipe for forward pass needs to be defined within
this function, one should call the <code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code> instance afterwards
instead of this since the former takes care of running the
registered hooks while the latter silently ignores them.</p>
</aside>
</dd></dl>

<dl class="method">
<dt id="espnet2.diar.abs_diar.AbsDiarization.forward_rawwav">
<em class="property">abstract </em><code class="sig-name descname">forward_rawwav</code><span class="sig-paren">(</span><em class="sig-param">input: torch.Tensor</em>, <em class="sig-param">ilens: torch.Tensor</em><span class="sig-paren">)</span> &#x2192; Tuple[torch.Tensor, torch.Tensor, collections.OrderedDict]<a class="reference internal" href="../_modules/espnet2/diar/abs_diar.html#AbsDiarization.forward_rawwav"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.abs_diar.AbsDiarization.forward_rawwav" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="espnet2-diar-init-1">
<span id="espnet2-diar-init"></span><h2>espnet2.diar.__init__<a class="headerlink" href="#espnet2-diar-init-1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.diar.__init__"></span></section>
<section id="espnet2-diar-decoder-abs-decoder-1">
<span id="espnet2-diar-decoder-abs-decoder"></span><h2>espnet2.diar.decoder.abs_decoder<a class="headerlink" href="#espnet2-diar-decoder-abs-decoder-1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.diar.decoder.abs_decoder"></span><dl class="class">
<dt id="espnet2.diar.decoder.abs_decoder.AbsDecoder">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.diar.decoder.abs_decoder.</code><code class="sig-name descname">AbsDecoder</code><a class="reference internal" href="../_modules/espnet2/diar/decoder/abs_decoder.html#AbsDecoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.decoder.abs_decoder.AbsDecoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.module.Module</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>Initializes internal Module state, shared by both nn.Module and ScriptModule.</p>
<dl class="method">
<dt id="espnet2.diar.decoder.abs_decoder.AbsDecoder.forward">
<em class="property">abstract </em><code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">input: torch.Tensor</em>, <em class="sig-param">ilens: torch.Tensor</em><span class="sig-paren">)</span> &#x2192; Tuple[torch.Tensor, torch.Tensor]<a class="reference internal" href="../_modules/espnet2/diar/decoder/abs_decoder.html#AbsDecoder.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.decoder.abs_decoder.AbsDecoder.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the computation performed at every call.</p>
<p>Should be overridden by all subclasses.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although the recipe for forward pass needs to be defined within
this function, one should call the <code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code> instance afterwards
instead of this since the former takes care of running the
registered hooks while the latter silently ignores them.</p>
</aside>
</dd></dl>

<dl class="method">
<dt id="espnet2.diar.decoder.abs_decoder.AbsDecoder.num_spk">
<em class="property">abstract property </em><code class="sig-name descname">num_spk</code><a class="headerlink" href="#espnet2.diar.decoder.abs_decoder.AbsDecoder.num_spk" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="espnet2-diar-decoder-linear-decoder-1">
<span id="espnet2-diar-decoder-linear-decoder"></span><h2>espnet2.diar.decoder.linear_decoder<a class="headerlink" href="#espnet2-diar-decoder-linear-decoder-1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.diar.decoder.linear_decoder"></span><dl class="class">
<dt id="espnet2.diar.decoder.linear_decoder.LinearDecoder">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.diar.decoder.linear_decoder.</code><code class="sig-name descname">LinearDecoder</code><span class="sig-paren">(</span><em class="sig-param">encoder_output_size: int</em>, <em class="sig-param">num_spk: int = 2</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/decoder/linear_decoder.html#LinearDecoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.decoder.linear_decoder.LinearDecoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#espnet2.diar.decoder.abs_decoder.AbsDecoder" title="espnet2.diar.decoder.abs_decoder.AbsDecoder"><code class="xref py py-class docutils literal notranslate"><span class="pre">espnet2.diar.decoder.abs_decoder.AbsDecoder</span></code></a></p>
<p>Linear decoder for speaker diarization</p>
<dl class="method">
<dt id="espnet2.diar.decoder.linear_decoder.LinearDecoder.forward">
<code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">input: torch.Tensor</em>, <em class="sig-param">ilens: torch.Tensor</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/decoder/linear_decoder.html#LinearDecoder.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.decoder.linear_decoder.LinearDecoder.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Forward.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>torch.Tensor</em>) – hidden_space [Batch, T, F]</p></li>
<li><p><strong>ilens</strong> (<em>torch.Tensor</em>) – input lengths [Batch]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="espnet2.diar.decoder.linear_decoder.LinearDecoder.num_spk">
<em class="property">property </em><code class="sig-name descname">num_spk</code><a class="headerlink" href="#espnet2.diar.decoder.linear_decoder.LinearDecoder.num_spk" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="espnet2-diar-decoder-init-1">
<span id="espnet2-diar-decoder-init"></span><h2>espnet2.diar.decoder.__init__<a class="headerlink" href="#espnet2-diar-decoder-init-1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.diar.decoder.__init__"></span></section>
<section id="espnet2-diar-separator-tcn-separator-nomask-1">
<span id="espnet2-diar-separator-tcn-separator-nomask"></span><h2>espnet2.diar.separator.tcn_separator_nomask<a class="headerlink" href="#espnet2-diar-separator-tcn-separator-nomask-1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.diar.separator.tcn_separator_nomask"></span><dl class="class">
<dt id="espnet2.diar.separator.tcn_separator_nomask.TCNSeparatorNomask">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.diar.separator.tcn_separator_nomask.</code><code class="sig-name descname">TCNSeparatorNomask</code><span class="sig-paren">(</span><em class="sig-param">input_dim: int</em>, <em class="sig-param">layer: int = 8</em>, <em class="sig-param">stack: int = 3</em>, <em class="sig-param">bottleneck_dim: int = 128</em>, <em class="sig-param">hidden_dim: int = 512</em>, <em class="sig-param">kernel: int = 3</em>, <em class="sig-param">causal: bool = False</em>, <em class="sig-param">norm_type: str = 'gLN'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/separator/tcn_separator_nomask.html#TCNSeparatorNomask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.separator.tcn_separator_nomask.TCNSeparatorNomask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="espnet2.enh.html#espnet2.enh.separator.abs_separator.AbsSeparator" title="espnet2.enh.separator.abs_separator.AbsSeparator"><code class="xref py py-class docutils literal notranslate"><span class="pre">espnet2.enh.separator.abs_separator.AbsSeparator</span></code></a></p>
<p>Temporal Convolution Separator</p>
<p>Note that this separator is equivalent to TCNSeparator except
for not having the mask estimation part.
This separator outputs the intermediate bottleneck feats
(which is used as the input to diarization branch in enh_diar task).
This separator is followed by MultiMask module,
which estimates the masks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_dim</strong> – input feature dimension</p></li>
<li><p><strong>layer</strong> – int, number of layers in each stack.</p></li>
<li><p><strong>stack</strong> – int, number of stacks</p></li>
<li><p><strong>bottleneck_dim</strong> – bottleneck dimension</p></li>
<li><p><strong>hidden_dim</strong> – number of convolution channel</p></li>
<li><p><strong>kernel</strong> – int, kernel size.</p></li>
<li><p><strong>causal</strong> – bool, defalut False.</p></li>
<li><p><strong>norm_type</strong> – str, choose from ‘BN’, ‘gLN’, ‘cLN’</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="espnet2.diar.separator.tcn_separator_nomask.TCNSeparatorNomask.forward">
<code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">input: Union[torch.Tensor, torch_complex.tensor.ComplexTensor], ilens: torch.Tensor</em><span class="sig-paren">)</span> &#x2192; Tuple[torch.Tensor, torch.Tensor]<a class="reference internal" href="../_modules/espnet2/diar/separator/tcn_separator_nomask.html#TCNSeparatorNomask.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.separator.tcn_separator_nomask.TCNSeparatorNomask.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Forward.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>torch.Tensor</em><em> or </em><em>ComplexTensor</em>) – Encoded feature [B, T, N]</p></li>
<li><p><strong>ilens</strong> (<em>torch.Tensor</em>) – input lengths [Batch]</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>[B, T, bottleneck_dim]
ilens (torch.Tensor): (B,)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>feats (torch.Tensor)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="espnet2.diar.separator.tcn_separator_nomask.TCNSeparatorNomask.num_spk">
<em class="property">property </em><code class="sig-name descname">num_spk</code><a class="headerlink" href="#espnet2.diar.separator.tcn_separator_nomask.TCNSeparatorNomask.num_spk" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="espnet2.diar.separator.tcn_separator_nomask.TCNSeparatorNomask.output_dim">
<em class="property">property </em><code class="sig-name descname">output_dim</code><a class="headerlink" href="#espnet2.diar.separator.tcn_separator_nomask.TCNSeparatorNomask.output_dim" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="espnet2-diar-separator-init-1">
<span id="espnet2-diar-separator-init"></span><h2>espnet2.diar.separator.__init__<a class="headerlink" href="#espnet2-diar-separator-init-1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.diar.separator.__init__"></span></section>
<section id="espnet2-diar-attractor-rnn-attractor-1">
<span id="espnet2-diar-attractor-rnn-attractor"></span><h2>espnet2.diar.attractor.rnn_attractor<a class="headerlink" href="#espnet2-diar-attractor-rnn-attractor-1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.diar.attractor.rnn_attractor"></span><dl class="class">
<dt id="espnet2.diar.attractor.rnn_attractor.RnnAttractor">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.diar.attractor.rnn_attractor.</code><code class="sig-name descname">RnnAttractor</code><span class="sig-paren">(</span><em class="sig-param">encoder_output_size: int</em>, <em class="sig-param">layer: int = 1</em>, <em class="sig-param">unit: int = 512</em>, <em class="sig-param">dropout: float = 0.1</em>, <em class="sig-param">attractor_grad: bool = True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/attractor/rnn_attractor.html#RnnAttractor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.attractor.rnn_attractor.RnnAttractor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#espnet2.diar.attractor.abs_attractor.AbsAttractor" title="espnet2.diar.attractor.abs_attractor.AbsAttractor"><code class="xref py py-class docutils literal notranslate"><span class="pre">espnet2.diar.attractor.abs_attractor.AbsAttractor</span></code></a></p>
<p>encoder decoder attractor for speaker diarization</p>
<dl class="method">
<dt id="espnet2.diar.attractor.rnn_attractor.RnnAttractor.forward">
<code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">enc_input: torch.Tensor</em>, <em class="sig-param">ilens: torch.Tensor</em>, <em class="sig-param">dec_input: torch.Tensor</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/attractor/rnn_attractor.html#RnnAttractor.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.attractor.rnn_attractor.RnnAttractor.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Forward.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>enc_input</strong> (<em>torch.Tensor</em>) – hidden_space [Batch, T, F]</p></li>
<li><p><strong>ilens</strong> (<em>torch.Tensor</em>) – input lengths [Batch]</p></li>
<li><p><strong>dec_input</strong> (<em>torch.Tensor</em>) – decoder input (zeros) [Batch, num_spk + 1, F]</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>[Batch, num_spk + 1, F]
att_prob: [Batch, num_spk + 1, 1]</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>attractor</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="espnet2-diar-attractor-abs-attractor-1">
<span id="espnet2-diar-attractor-abs-attractor"></span><h2>espnet2.diar.attractor.abs_attractor<a class="headerlink" href="#espnet2-diar-attractor-abs-attractor-1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.diar.attractor.abs_attractor"></span><dl class="class">
<dt id="espnet2.diar.attractor.abs_attractor.AbsAttractor">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.diar.attractor.abs_attractor.</code><code class="sig-name descname">AbsAttractor</code><a class="reference internal" href="../_modules/espnet2/diar/attractor/abs_attractor.html#AbsAttractor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.attractor.abs_attractor.AbsAttractor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.module.Module</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>Initializes internal Module state, shared by both nn.Module and ScriptModule.</p>
<dl class="method">
<dt id="espnet2.diar.attractor.abs_attractor.AbsAttractor.forward">
<em class="property">abstract </em><code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">enc_input: torch.Tensor</em>, <em class="sig-param">ilens: torch.Tensor</em>, <em class="sig-param">dec_input: torch.Tensor</em><span class="sig-paren">)</span> &#x2192; Tuple[torch.Tensor, torch.Tensor]<a class="reference internal" href="../_modules/espnet2/diar/attractor/abs_attractor.html#AbsAttractor.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.attractor.abs_attractor.AbsAttractor.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the computation performed at every call.</p>
<p>Should be overridden by all subclasses.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although the recipe for forward pass needs to be defined within
this function, one should call the <code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code> instance afterwards
instead of this since the former takes care of running the
registered hooks while the latter silently ignores them.</p>
</aside>
</dd></dl>

</dd></dl>

</section>
<section id="espnet2-diar-attractor-init-1">
<span id="espnet2-diar-attractor-init"></span><h2>espnet2.diar.attractor.__init__<a class="headerlink" href="#espnet2-diar-attractor-init-1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.diar.attractor.__init__"></span></section>
<section id="espnet2-diar-layers-tcn-nomask-1">
<span id="espnet2-diar-layers-tcn-nomask"></span><h2>espnet2.diar.layers.tcn_nomask<a class="headerlink" href="#espnet2-diar-layers-tcn-nomask-1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.diar.layers.tcn_nomask"></span><dl class="class">
<dt id="espnet2.diar.layers.tcn_nomask.ChannelwiseLayerNorm">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.diar.layers.tcn_nomask.</code><code class="sig-name descname">ChannelwiseLayerNorm</code><span class="sig-paren">(</span><em class="sig-param">channel_size</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/layers/tcn_nomask.html#ChannelwiseLayerNorm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.tcn_nomask.ChannelwiseLayerNorm" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.module.Module</span></code></p>
<p>Channel-wise Layer Normalization (cLN).</p>
<dl class="method">
<dt id="espnet2.diar.layers.tcn_nomask.ChannelwiseLayerNorm.forward">
<code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">y</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/layers/tcn_nomask.html#ChannelwiseLayerNorm.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.tcn_nomask.ChannelwiseLayerNorm.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Forward.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>y</strong> – [M, N, K], M is batch size, N is channel size, K is length</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>[M, N, K]</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>cLN_y</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="espnet2.diar.layers.tcn_nomask.ChannelwiseLayerNorm.reset_parameters">
<code class="sig-name descname">reset_parameters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/layers/tcn_nomask.html#ChannelwiseLayerNorm.reset_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.tcn_nomask.ChannelwiseLayerNorm.reset_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="espnet2.diar.layers.tcn_nomask.Chomp1d">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.diar.layers.tcn_nomask.</code><code class="sig-name descname">Chomp1d</code><span class="sig-paren">(</span><em class="sig-param">chomp_size</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/layers/tcn_nomask.html#Chomp1d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.tcn_nomask.Chomp1d" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.module.Module</span></code></p>
<p>To ensure the output length is the same as the input.</p>
<dl class="method">
<dt id="espnet2.diar.layers.tcn_nomask.Chomp1d.forward">
<code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/layers/tcn_nomask.html#Chomp1d.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.tcn_nomask.Chomp1d.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Forward.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> – [M, H, Kpad]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>[M, H, K]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="espnet2.diar.layers.tcn_nomask.DepthwiseSeparableConv">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.diar.layers.tcn_nomask.</code><code class="sig-name descname">DepthwiseSeparableConv</code><span class="sig-paren">(</span><em class="sig-param">in_channels</em>, <em class="sig-param">out_channels</em>, <em class="sig-param">kernel_size</em>, <em class="sig-param">stride</em>, <em class="sig-param">padding</em>, <em class="sig-param">dilation</em>, <em class="sig-param">norm_type='gLN'</em>, <em class="sig-param">causal=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/layers/tcn_nomask.html#DepthwiseSeparableConv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.tcn_nomask.DepthwiseSeparableConv" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.module.Module</span></code></p>
<dl class="method">
<dt id="espnet2.diar.layers.tcn_nomask.DepthwiseSeparableConv.forward">
<code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/layers/tcn_nomask.html#DepthwiseSeparableConv.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.tcn_nomask.DepthwiseSeparableConv.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Forward.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> – [M, H, K]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>[M, B, K]</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>result</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="espnet2.diar.layers.tcn_nomask.GlobalLayerNorm">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.diar.layers.tcn_nomask.</code><code class="sig-name descname">GlobalLayerNorm</code><span class="sig-paren">(</span><em class="sig-param">channel_size</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/layers/tcn_nomask.html#GlobalLayerNorm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.tcn_nomask.GlobalLayerNorm" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.module.Module</span></code></p>
<p>Global Layer Normalization (gLN).</p>
<dl class="method">
<dt id="espnet2.diar.layers.tcn_nomask.GlobalLayerNorm.forward">
<code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">y</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/layers/tcn_nomask.html#GlobalLayerNorm.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.tcn_nomask.GlobalLayerNorm.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Forward.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>y</strong> – [M, N, K], M is batch size, N is channel size, K is length</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>[M, N, K]</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>gLN_y</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="espnet2.diar.layers.tcn_nomask.GlobalLayerNorm.reset_parameters">
<code class="sig-name descname">reset_parameters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/layers/tcn_nomask.html#GlobalLayerNorm.reset_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.tcn_nomask.GlobalLayerNorm.reset_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="espnet2.diar.layers.tcn_nomask.TemporalBlock">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.diar.layers.tcn_nomask.</code><code class="sig-name descname">TemporalBlock</code><span class="sig-paren">(</span><em class="sig-param">in_channels</em>, <em class="sig-param">out_channels</em>, <em class="sig-param">kernel_size</em>, <em class="sig-param">stride</em>, <em class="sig-param">padding</em>, <em class="sig-param">dilation</em>, <em class="sig-param">norm_type='gLN'</em>, <em class="sig-param">causal=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/layers/tcn_nomask.html#TemporalBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.tcn_nomask.TemporalBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.module.Module</span></code></p>
<dl class="method">
<dt id="espnet2.diar.layers.tcn_nomask.TemporalBlock.forward">
<code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/layers/tcn_nomask.html#TemporalBlock.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.tcn_nomask.TemporalBlock.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Forward.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> – [M, B, K]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>[M, B, K]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="espnet2.diar.layers.tcn_nomask.TemporalConvNet">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.diar.layers.tcn_nomask.</code><code class="sig-name descname">TemporalConvNet</code><span class="sig-paren">(</span><em class="sig-param">N</em>, <em class="sig-param">B</em>, <em class="sig-param">H</em>, <em class="sig-param">P</em>, <em class="sig-param">X</em>, <em class="sig-param">R</em>, <em class="sig-param">norm_type='gLN'</em>, <em class="sig-param">causal=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/layers/tcn_nomask.html#TemporalConvNet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.tcn_nomask.TemporalConvNet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.module.Module</span></code></p>
<p>Basic Module of tasnet.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>N</strong> – Number of filters in autoencoder</p></li>
<li><p><strong>B</strong> – Number of channels in bottleneck 1 * 1-conv block</p></li>
<li><p><strong>H</strong> – Number of channels in convolutional blocks</p></li>
<li><p><strong>P</strong> – Kernel size in convolutional blocks</p></li>
<li><p><strong>X</strong> – Number of convolutional blocks in each repeat</p></li>
<li><p><strong>R</strong> – Number of repeats</p></li>
<li><p><strong>norm_type</strong> – BN, gLN, cLN</p></li>
<li><p><strong>causal</strong> – causal or non-causal</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="espnet2.diar.layers.tcn_nomask.TemporalConvNet.forward">
<code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">mixture_w</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/layers/tcn_nomask.html#TemporalConvNet.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.tcn_nomask.TemporalConvNet.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Keep this API same with TasNet.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mixture_w</strong> – [M, N, K], M is batch size</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>[M, B, K]</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bottleneck_feature</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="espnet2.diar.layers.tcn_nomask.check_nonlinear">
<code class="sig-prename descclassname">espnet2.diar.layers.tcn_nomask.</code><code class="sig-name descname">check_nonlinear</code><span class="sig-paren">(</span><em class="sig-param">nolinear_type</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/layers/tcn_nomask.html#check_nonlinear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.tcn_nomask.check_nonlinear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.diar.layers.tcn_nomask.chose_norm">
<code class="sig-prename descclassname">espnet2.diar.layers.tcn_nomask.</code><code class="sig-name descname">chose_norm</code><span class="sig-paren">(</span><em class="sig-param">norm_type</em>, <em class="sig-param">channel_size</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/layers/tcn_nomask.html#chose_norm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.tcn_nomask.chose_norm" title="Permalink to this definition">¶</a></dt>
<dd><p>The input of normalization will be (M, C, K), where M is batch size.</p>
<p>C is channel size and K is sequence length.</p>
</dd></dl>

</section>
<section id="espnet2-diar-layers-abs-mask-1">
<span id="espnet2-diar-layers-abs-mask"></span><h2>espnet2.diar.layers.abs_mask<a class="headerlink" href="#espnet2-diar-layers-abs-mask-1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.diar.layers.abs_mask"></span><dl class="class">
<dt id="espnet2.diar.layers.abs_mask.AbsMask">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.diar.layers.abs_mask.</code><code class="sig-name descname">AbsMask</code><a class="reference internal" href="../_modules/espnet2/diar/layers/abs_mask.html#AbsMask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.abs_mask.AbsMask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.module.Module</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>Initializes internal Module state, shared by both nn.Module and ScriptModule.</p>
<dl class="method">
<dt id="espnet2.diar.layers.abs_mask.AbsMask.forward">
<em class="property">abstract </em><code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">input</em>, <em class="sig-param">ilens</em>, <em class="sig-param">bottleneck_feat</em>, <em class="sig-param">num_spk</em><span class="sig-paren">)</span> &#x2192; Tuple[Tuple[torch.Tensor], torch.Tensor, collections.OrderedDict]<a class="reference internal" href="../_modules/espnet2/diar/layers/abs_mask.html#AbsMask.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.abs_mask.AbsMask.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the computation performed at every call.</p>
<p>Should be overridden by all subclasses.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although the recipe for forward pass needs to be defined within
this function, one should call the <code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code> instance afterwards
instead of this since the former takes care of running the
registered hooks while the latter silently ignores them.</p>
</aside>
</dd></dl>

<dl class="method">
<dt id="espnet2.diar.layers.abs_mask.AbsMask.max_num_spk">
<em class="property">abstract property </em><code class="sig-name descname">max_num_spk</code><a class="headerlink" href="#espnet2.diar.layers.abs_mask.AbsMask.max_num_spk" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="espnet2-diar-layers-multi-mask-1">
<span id="espnet2-diar-layers-multi-mask"></span><h2>espnet2.diar.layers.multi_mask<a class="headerlink" href="#espnet2-diar-layers-multi-mask-1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.diar.layers.multi_mask"></span><dl class="class">
<dt id="espnet2.diar.layers.multi_mask.MultiMask">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.diar.layers.multi_mask.</code><code class="sig-name descname">MultiMask</code><span class="sig-paren">(</span><em class="sig-param">input_dim: int</em>, <em class="sig-param">bottleneck_dim: int = 128</em>, <em class="sig-param">max_num_spk: int = 3</em>, <em class="sig-param">mask_nonlinear='relu'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/diar/layers/multi_mask.html#MultiMask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.multi_mask.MultiMask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#espnet2.diar.layers.abs_mask.AbsMask" title="espnet2.diar.layers.abs_mask.AbsMask"><code class="xref py py-class docutils literal notranslate"><span class="pre">espnet2.diar.layers.abs_mask.AbsMask</span></code></a></p>
<p>Multiple 1x1 convolution layer Module.</p>
<p>This module corresponds to the final 1x1 conv block and
non-linear function in TCNSeparator.
This module has multiple 1x1 conv blocks. One of them is selected
according to the given num_spk to handle flexible num_spk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_dim</strong> – Number of filters in autoencoder</p></li>
<li><p><strong>bottleneck_dim</strong> – Number of channels in bottleneck 1 * 1-conv block</p></li>
<li><p><strong>max_num_spk</strong> – Number of mask_conv1x1 modules
(&gt;= Max number of speakers in the dataset)</p></li>
<li><p><strong>mask_nonlinear</strong> – use which non-linear function to generate mask</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="espnet2.diar.layers.multi_mask.MultiMask.forward">
<code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">input: Union[torch.Tensor, torch_complex.tensor.ComplexTensor], ilens: torch.Tensor, bottleneck_feat: torch.Tensor, num_spk: int</em><span class="sig-paren">)</span> &#x2192; Tuple[List[Union[torch.Tensor, torch_complex.tensor.ComplexTensor]], torch.Tensor, collections.OrderedDict]<a class="reference internal" href="../_modules/espnet2/diar/layers/multi_mask.html#MultiMask.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.diar.layers.multi_mask.MultiMask.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Keep this API same with TasNet.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> – [M, K, N], M is batch size</p></li>
<li><p><strong>ilens</strong> (<em>torch.Tensor</em>) – (M,)</p></li>
<li><p><strong>bottleneck_feat</strong> – [M, K, B]</p></li>
<li><p><strong>num_spk</strong> – number of speakers</p></li>
<li><p><strong>(</strong><strong>Training</strong> – oracle,</p></li>
<li><p><strong>Inference</strong> – estimated by other module (e.g, EEND-EDA))</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>[(M, K, N), …]
ilens (torch.Tensor): (M,)
others predicted data, e.g. masks: OrderedDict[</p>
<blockquote>
<div><p>’mask_spk1’: torch.Tensor(Batch, Frames, Freq),
‘mask_spk2’: torch.Tensor(Batch, Frames, Freq),
…
‘mask_spkn’: torch.Tensor(Batch, Frames, Freq),</p>
</div></blockquote>
<p>]</p>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>masked (List[Union(torch.Tensor, ComplexTensor)])</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="espnet2.diar.layers.multi_mask.MultiMask.max_num_spk">
<em class="property">property </em><code class="sig-name descname">max_num_spk</code><a class="headerlink" href="#espnet2.diar.layers.multi_mask.MultiMask.max_num_spk" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="espnet2-diar-layers-init-1">
<span id="espnet2-diar-layers-init"></span><h2>espnet2.diar.layers.__init__<a class="headerlink" href="#espnet2-diar-layers-init-1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.diar.layers.__init__"></span></section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="espnet2.torch_utils.html" class="btn btn-neutral float-left" title="espnet2.torch_utils package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../apis/espnet_bin.html" class="btn btn-neutral float-right" title="core tools" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, Shinji Watanabe.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>